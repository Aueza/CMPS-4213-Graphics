<!DOCTYPE html> 
<html>
    
    <body>
        <canvas width="500" height="500" id="glCanvas"/>
        <script>
            var canvas = document.getElementById("glCanvas");
            var gl = canvas.getContext("webgl2");

            
            var squareOfTriangles = [
                -0.5,  0.5,  0.0, 
                0.5,  0.5,  0.0, 
                0.5, -0.5,  0.0, 

                -0.5,  0.5,  0.0,
                0.5, -0.5,  0.0,
                -0.5, -0.5,  0.0 
            ];

            var colors = [
                1.0, 0.0, 0.0,
                1.0, 0.0, 0.0, // red
                1.0, 0.0, 0.0,
                
                0.0, 0.0, 1.0,
                0.0, 0.0, 1.0, // blue
                0.0, 0.0, 1.0
            ]

            console.log(squareOfTriangles);

            
            var vertShaderSrcCode = 
            `
            attribute vec3 aPosition;
            attribute vec3 aColor;
            varying vec3 vColor;

            void main() {
                // Code to move the color to the fragment shader.
                vColor = aColor;
                gl_Position = vec4(aPosition, 1.0);
            }
            `;


            
           var fragShaderSrcCode = 
            `
            precision mediump float;
            varying vec3 vColor;
            void main() {
                gl_FragColor = vec4(vColor, 1.0);
            }
            `;
            
            
            vertShdr = gl.createShader( gl.VERTEX_SHADER );
            gl.shaderSource( vertShdr, vertShaderSrcCode);
            gl.compileShader( vertShdr );
            console.log(gl.getShaderParameter(vertShdr, gl.COMPILE_STATUS));
            console.log(gl.getShaderInfoLog( vertShdr ));


            
            fragShdr = gl.createShader( gl.FRAGMENT_SHADER );
            gl.shaderSource( fragShdr, fragShaderSrcCode);
            gl.compileShader( fragShdr );
            console.log(gl.getShaderParameter(fragShdr, gl.COMPILE_STATUS));
            console.log(gl.getShaderInfoLog( fragShdr ));

            
            var program = gl.createProgram();
            gl.attachShader( program, vertShdr );
            gl.attachShader( program, fragShdr );
            gl.linkProgram( program );
            console.log(gl.getProgramInfoLog( program ));
            gl.useProgram(program)
            

            var vBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(squareOfTriangles), gl.STATIC_DRAW);

            

            var positionLoc = gl.getAttribLocation( program, "aPosition");
            gl.vertexAttribPointer(positionLoc, 3, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(positionLoc);

            var colorBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);

            var colorLoc = gl.getAttribLocation(program, "aColor");
            gl.vertexAttribPointer(colorLoc, 3, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(colorLoc);


            // TODO: redner the scene (everything should be ready)
            gl.clearColor(0.2, 0.2, 0.2, 1.0);
            gl.enable(gl.DEPTH_TEST);
            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
            gl.drawArrays(gl.TRIANGLES, 0, 6);
            
            
        </script>

        <script src="hidden.js"></script>
        
    </body>
</html>